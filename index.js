(function(){"use strict";function c(e,A,t,s,o,i,a,r){var n=typeof e=="function"?e.options:e;return A&&(n.render=A,n.staticRenderFns=t,n._compiled=!0),{exports:e,options:n}}const b={extends:"k-field",props:{value:String,emptyText:{type:String,default:"Add Apple Music embed..."},format:{type:String,default:"embed"}},computed:{hasContent(){return this.value&&this.value.trim()!==""},previewHtml(){if(!this.value)return"";if(this.format==="embed")return this.value;if(this.format==="link"){const e=this.transformLinkToEmbedSrc(this.value);return e?`<iframe allow="autoplay *; encrypted-media *;" frameborder="0" height="150" style="width:100%;overflow:hidden;background:transparent;" sandbox="allow-forms allow-popups allow-same-origin allow-scripts allow-storage-access-by-user-activation allow-top-navigation-by-user-activation" src="${e}"></iframe>`:""}return""}},methods:{transformLinkToEmbedSrc(e){return!e||typeof e!="string"||!e.startsWith("https://music.apple.com")?"":e.replace(/^https:\/\/music\.apple\.com/,"https://embed.music.apple.com")},handleSubmit(e){const A=e[this.name];if(!(this.format==="embed"?typeof A=="string"&&A.includes("<iframe")&&A.includes("embed.music.apple.com"):this.format==="link"?typeof A=="string"&&A.startsWith("https://music.apple.com/"):!1)){this.$panel.notification.error({message:this.format==="link"?"Enter a valid link (e.g. https://music.apple.com/...)":"Valid Apple Music embed not found.",timeout:4e3});return}Promise.resolve().then(()=>{this.$emit("input",A),this.$emit("change",A),this.closeDrawer(),this.$panel.notification.success({message:"Ok",timeout:4e3})}).catch(()=>{this.$panel.notification.error({message:"An error occurred",timeout:4e3})})},openDrawer(){const e={label:this.format==="link"?"Apple Music URL":"Embed Code",type:this.format==="link"?"url":"textarea",icon:this.icon==="link"?"link":"code",spellcheck:!1,autofocus:!0,help:this.help||(this.format==="link"?"Paste an Apple Music URL like https://music.apple.com...":"Paste the embed code (iframe) for a album, song, or playlist from Apple Music.")};this.format!=="link"&&(e.font="monospace",e.buttons=!1,e.size="medium",e.validate=A=>typeof A=="string"&&A.includes("<iframe")&&A.includes("embed.music.apple.com")||"Please paste valid Apple Music embed code."),this.$panel.drawer.open({component:"k-form-drawer",props:{icon:"album",title:this.label||"Apple Music Embed",value:{[this.name]:this.value},fields:{[this.name]:e}},on:{submit:this.handleSubmit.bind(this)}})},closeDrawer(){this.$panel.drawer.close()}}};var k=function(){var A=this,t=A._self._c;return t("k-field",A._b({staticClass:"k-applemusic-field"},"k-field",A.$props,!1),[t("k-button",{attrs:{slot:"options",icon:"edit-line",size:"xs",variant:"filled"},on:{click:A.openDrawer},slot:"options"},[A._v("Edit...")]),A.hasContent?A._e():t("div",{staticClass:"k-applemusic-empty"},[t("k-grid",{staticStyle:{"--columns":"1",gap:"0.5rem"}},[t("k-empty",{attrs:{text:A.emptyText,icon:"album"},on:{click:A.openDrawer}})],1)],1),t("div",{staticClass:"k-applemusic-preview",domProps:{innerHTML:A._s(A.previewHtml)}})],1)},w=[],v=c(b,k,w);const x=v.exports,y={created(){var e;console.log("[AppleMusicBlock] format:",this.format),console.log("[AppleMusicBlock] value:",(e=this.content)==null?void 0:e.apple_music)},computed:{hasContent(){var e,A;return((A=(e=this.content)==null?void 0:e.apple_music)==null?void 0:A.length)>0},format(){var A;const e=(A=this.content)==null?void 0:A.format;return typeof e=="string"?e:e===!0?"link":"embed"},hasErrors(){var A;const e=((A=this.content)==null?void 0:A.apple_music)||"";return e?this.format==="embed"?!e.includes("<iframe"):this.format==="link"?!/^https:\/\/music\.apple\.com\/.+/.test(e):!0:!1},previewHtml(){var A;const e=((A=this.content)==null?void 0:A.apple_music)||"";return e?this.format==="embed"?e:this.format==="link"?`<iframe 
					allow="autoplay *; encrypted-media *;" 
					frameborder="0" 
					height="150" 
					style="width:100%;overflow:hidden;background:transparent;" 
					sandbox="allow-forms allow-popups allow-same-origin allow-scripts allow-storage-access-by-user-activation allow-top-navigation-by-user-activation" 
					src="${e.replace(/^https:\/\/music\.apple\.com/,"https://embed.music.apple.com")}"></iframe>`:"":""}}};var L=function(){var A=this,t=A._self._c;return t("div",{staticClass:"k-applemusic-preview"},[A.hasContent&&!A.hasErrors?[t("k-html-field-preview",{attrs:{value:A.previewHtml}})]:A.hasErrors?[t("k-grid",{staticStyle:{"--columns":"1",gap:"0.5rem"}},[t("k-box",{attrs:{theme:"warning",icon:"alert",text:`Invalid Apple Music ${A.format==="embed"?"embed":"link"}`}})],1)]:[t("k-empty",{attrs:{icon:"album",text:"Add an Apple Music embed..."}})]],2)},S=[],T=c(y,L,S);const M=T.exports,C={name:"Configure Apple Music",props:{appName:String,appBuild:String,hasToken:Boolean,status:String,missing:Array,errors:Array},data(){return{loading:!0,busy:!1,localStatus:this.status??null,localMissing:this.missing??[],localErrors:this.errors??[]}},computed:{emptyText(){return this.localStatus==="unconfigured"?"Apple Music is not fully configured yet":"Invalid Apple Music configuration"}},async created(){try{const A=await(await fetch(`${window.location.origin}/applemusic/config-status`,{credentials:"same-origin",headers:{Accept:"application/json"}})).json();this.localStatus=A.status,this.localMissing=A.missing||[],this.localErrors=A.errors||[]}finally{this.loading=!1}},methods:{redirectAuth(){},reload(){this.$reload()}}};var V=function(){var A=this,t=A._self._c;return t("k-panel-inside",[t("k-view",{staticClass:"k-musickit-config-view"},[t("k-header",{staticClass:"k-site-view-header"},[A._v(" Configure Apple Music "),t("k-button-group",{attrs:{slot:"buttons"},slot:"buttons"},[t("k-button",{attrs:{variant:"filled",theme:"blue-icon",icon:"document",size:"xs",link:"https://github.com/scottboms/kirby-applemusic/blob/main/README.md",target:"_blank",responsive:"true",text:"Setup Guide"}})],1)],1),A.loading?t("k-box",{attrs:{icon:"loader"}},[A._v("Checking configuration...")]):t("k-box",{attrs:{icon:"settings",text:A.emptyText,theme:"warning"}}),!A.loading&&A.localStatus!=="ok"?t("k-grid",{staticStyle:{"--columns":"1",gap:"0"}},[t("k-box",{staticStyle:{"margin-top":"var(--spacing-2)"},attrs:{theme:"text"}},[t("k-text",{attrs:{theme:"text"}},[t("h1",[A._v("Errors")]),t("ul",[A.localMissing.length?t("li",[A._v("Missing required configuration settings â€” "),t("strong",[A._v(A._s(A.localMissing.join(", ")))])]):A._e(),A._l(A.localErrors,function(s){return t("li",{key:s},[A._v(A._s(s))])})],2),t("p",[A._v("Correct these settings in "),t("code",[A._v("env.php")]),A._v(" under "),t("code",[A._v("scottboms.applemusic.*")]),A._v(". Review the Setup Guide for further information.")])])],1)],1):A._e()],1)],1)},I=[],D=c(C,V,I);const E=D.exports;function p({url:e,onCopy:A,onEmbed:t,onError:s}){return e?[{icon:"headphones",text:"Listen",click:()=>window.open(e,"_blank")},"-",{icon:"url",text:"Copy Link",click:()=>A==null?void 0:A(e)},{icon:"code",text:"Embed Code",click:()=>{try{const o=t==null?void 0:t(e);if(!o)throw new Error("No embed");A==null||A(o,"Embed copied to clipboard")}catch{s==null||s("Could not create embed code")}}}]:[]}const j="data:image/jpeg;base64,/9j/4QBORXhpZgAATU0AKgAAAAgAAwEaAAUAAAABAAAAMgEbAAUAAAABAAAAOgEoAAMAAAABAAIAAAAAAAAACvyAAAAnEAAK/IAAACcQAAAAAP/tAEBQaG90b3Nob3AgMy4wADhCSU0EBgAAAAAABwAGAQEAAQEAOEJJTQQlAAAAAAAQAAAAAAAAAAAAAAAAAAAAAP/uACFBZG9iZQBkQAAAAAEDABADAgMGAAAAAAAAAAAAAAAA/9sAhAACAgICAgICAgICAwICAgMEAwICAwQFBAQEBAQFBgUFBQUFBQYGBwcIBwcGCQkKCgkJDAwMDAwMDAwMDAwMDAwMAQMDAwUEBQkGBgkNCgkKDQ8ODg4ODw8MDAwMDA8PDAwMDAwMDwwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAz/wgARCAPoA+gDAREAAhEBAxEB/8QAtgABAAMBAQEBAQAAAAAAAAAAAAUGBwQDAQIJAQEAAAAAAAAAAAAAAAAAAAAAEAAABAYBAwMEAgIDAQAAAAAAAwQFIAECFTUGUDBAFhEyE2ASFDQQMbDQISIzJBEAAQICAwgQBAIJBAMBAAAAAQIDAAQRsjQgUCExcdGTdDBAQVFhgZGhsRIictKDo7PBQlITEGAyYoKSoiNDJAWwwlMUM2QV4RIBAAAAAAAAAAAAAAAAAAAA0P/aAAwDAQECEQMRAAAA/jOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADwPI+AAAAAAAAAAAAAAAAAAH09D3PoAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPMgSCIkjz8AAAAAAAAAAAAAAAAAAAAH7O4licLAeoAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOcp5VTxAAAAAAAAAAAAAAAAAAAAAAAAPUs5cjqAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAK2UM5wAAAAAAAAAAAAAAAAAAAAAAAAAD1LyWoAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAo5TwAAAAAAAAAAAAAAAAAAAAAAAAAAAC0F/PoAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAKOU8AAAAAAAAAAAAAAAAAAAAAAAAAAAAAs5oIAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABWzOwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAC9FuAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOcyc5wAAD9k8TR3nufQAAAAAAAAAAAAAAAAAD4eJwEOV88wAAD0NWO4AAAAAAAAAAAAAAAAAAAAAAAAAAAAAFHKeAAAWkux0gAAAAAAAAAAAAAAAAAAAAAHgUwqR8AABZTQwAAAAAAAAAAAAAAAAAAAAAAAAAAAADzMhPEAAF8LYAAAAAAAAAAAAAAAAAAAAAAAAVoz0+AAH6NbOsAAAAAAAAAAAAAAAAAAAAAAAAAAAAFcM6AABaDQAAAAAAAAAAAAAAAAAAAAAAAAACkFOAABei3AAAAAAAAAAAAAAAAAAAAAAAAAAAAAz8q4AB+jXDqAAAAAAAAAAAAAAAAAAAAAAAAAPIyM8AACcNMAAAAAAAAAAAAAAAAAAAAAAAAAAAABlRGAAE8aUAAAAAAAAAAAAAAAAAAAAAAAAAAUEqoAB7GxAAAAAAAAAAAAAAAAAAAAAAAAAAAAAxo/AABeC4AAAAAAAAAAAAAAAAAAAAAAAAAAFbM7AABrx1AAAAAAAAAAAAAAAAAAAAAAAAAAAA8DHgAAaOWEAAAAAAAAAAAAAAAAAAAAAAAAAAizKwAAaoSgAAAAAAAAAAAAAAAAAAAAAAAAAAAOMyMAAGmk2AAAAAAAAAAAAAAAAAAAAAAAAAAcRkgAANPJkAAAAAAAAAAAAAAAAAAAAAAAAAAAHEZIAADTyZAAAAAAAAAAAAAAAAAPwRZxk6ewAAAAAAOMyMAAGnE0AAAAAAAAAAAAAAAAAAAAAAAAAAADiMkAABp5MgAAAAAAAAAAAAAAHkRBDEMRJ5guBeAAAAAAAcZkYAANOJoAAAAAAAAAAAAAAAAAAAAAAAAAAAHEZIAADTyZAAAAAAAAAAAAAOchyGIYiz8gAAtJfwAAAAAAcZkYAANOJoAAAAAAAAAAAAAAAAAAAAAAAAAAAHEZIAADTyZAAAAAAAAAAAAIkoRFAAAAAFpL+AAAAAADjMjAABpxNAAAAAAAAAAAAAAAAAAAAAAAAAAAA4jJAAAaeTIAAAAAAAAAAABmxAAAAAAAtJfwAAAAAAcZkYAANOJoAAAAAAAAAAAAAAAAAAAAAAAAAAAHEZIAADTyZAAAAAAAAAAAAMuIgAAAAAFpL+AAAAAADjMjAABpxNAAAAAAAAAAAAAAAAAAAAAAAAAAAA4jJAAAaeTIAAAAAAAAAAABlpEgAAAAAtJfwAAAAAAcZkYAANOJoAAAAAAAAAAAAAAAAAAAAAAAAAAAHEZIAADTyZAAAAAAAAAAAAMtIkAAAAAFpL+AAAAAADjMjAABpxNAAAAAAAAAAAAAAAAAAAAAAAAAAAA4jJAAAaeTIAAAAAAAAAAABlpEgAAAAAtJfwAAAAAAcZkYAANOJoAAAAAAAAAAAAAAAAAAAAAAAAAAAHEZIAADTyZAAAAAAAAAAAAMtIkAAAAAF2LkAAAAAADjMjAABpxNAAAAAAAAAAAAAAAAAAAAAAAAAAAA4jJAAAaeTIAAAAAAAAAAABlpEgAAAA9SfL6e4AAAAAAOMyMAAGnE0AAAAAAAAAAAAAAAAAAAAAAAAAAADiMkAABp5MgAAAAAAAAAAAGWkSAADpJkmCYJQ/QAAAAAAAOMyMAAGnE0AAAAAAAAAAAAAAAAAAAAAAAAAAADiMkAABp5MgAAAAAAAAAAAGWkSDvJkmSYO8AAAAAAAAAA4zIwAAacTQAAAAAAAAAAAAAAAAAAAAAAAAAAAOIyQAAGnkyAAAAAAAAAAAAZaRJYTRwAAAAAAAAAAADjMjAABpxNAAAAAAAAAAAAAAAAAAAAAAAAAAAA4jJAAAaeTIAAAAAAAAAAABlpElxLuAAAAAAAAAAAAcZkYAANOJoAAAAAAAAAAAAAAAAAAAAAAAAAAAHEZIAADTyZAAAAAAAAAAAAMtIkuJdwAAAAAAAAAAADjMjAABpxNAAAAAAAAAAAAAAAAAAAAAAAAAAAA4jJAAAaeTIAAAAAAAAAAABlpElxLuAAAAAAAAAAAAcZkYAANOJoAAAAAAAAAAAAAAAAAAAAAAAAAAAHEZIAADTyZAAAAAAAAAAAAMtIkuJdwAAAAAAAAAAADjMjAABpxNAAAAAAAAAAAAAAAAAAAAAAAAAAAA4jJAAAaeTIAAAAAAAAAAABlpElxLuAAAAAAAAAAAAcZkYAANOJoAAAAAAAAAAAAAAAAAAAAAAAAAAAHEZIAADTyZAAAAAAAAAAAAMtIkuJdwAAAAAAAAAAADjMjAABpxNAAAAAAAAAAAAAAAAAAAAAAAAAAAA4jJAAAaeTIAAAAAAAAAAABlpElxLuAAAAAAAAAAAAcZkYAANOJoAAAAAAAAAAAAAAAAAAAAAAAAAAAHEZIAADTyZAAAAAAAAAAAAMtIkuJdwAAAAAAAAAAADjMjAABpxNAAAAAAAAAAAAAAAAAAAAAAAAAAAA4jJAAAaeTIAAAAAAAAAAABlpElxLuAAAAAAAAAAAAcZkYAANOJoAAAAAAAAAAAAAAAAAAAAAAAAAAAHEZIAADTyZAAAAAAAAAAAAMpI0uJdwAAAAAAAAAAADjMjAABpxNAAAAAAAAAAAAAAAAAAAAAAAAAAAA4jJAAAaeTIAAAAAAAAAAB5FYKIfC4l3AAAAAAAAAAAAOMyMAAGnE0AAAAAAAAAAAAAAAAAAAAAAAAAAADiMkAABp5MgAAAAAAAAHwiiDIQhz8AFxLuAAAAAAAAAAAAcZkYAANOJoAAAAAAAAAAAAAAAAAAAAAAAAAAAHEZIAADTyZAAAAAAAAOQqJWjlAAALiXcAAAAAAAAAAAA4zIwAAacTQAAAAAAAAAAAAAAAAAAAAAAAAAAAOIyQAAGnkyAAAAAAACsFDPIAAAAuJdwAAAAAAAAAAADjMjAABpxNAAAAAAAAAAAAAAAAAAAAAAAAAAAA4jJAAAaeTIAAAAAABVzPwAAAAC5F2AAAAAAAAAAAAOMyMAAGnE0AAAAAAAAAAAAAAAAAAAAAAAAAAADiMkAABp5MgAAAAAA8DJDxAAAAALuXEAAAAAAAAAAAA4zIwAAacTQAAAAAAAAAAAAAAAAAAAAAAAAAAAOIyQAAGnkyAAAAAACtmdgAAAAA0YsQAAAAAAAAAAABxmRgAA04mgAAAAAAAAAAAAAAAAAAAAAAAAAAAcRkgAANPJkAAAAAAFOKQAAAAAfTXjpAAAAAAAAAAAAOMyMAAGnE0AAAAAAAAAAAAAAAAAAAAAAAAAAADiMkAABp5MgAAAAAAqhQgAAAACwmjgAAAAAAAAAAAA4zIwAAacTQAAAAAAAAAAAAAAAAAAAAAAAAAAAOIyQAAGnkyAAAAAACPMnAAAAB6GqEgAAAAAAAAAAAADjMjAABpxNAAAAAAAAAAAAAAAAAAAAAAAAAAAA4jJAAAaeTIAAAAAABQCrAAAA/ZohYQAAAAAAAAAAAADjMjAABpxNAAAAAAAAAAAAAAAAAAAAAAAAAAAA4jJAAAaeTIAAAAAAB+ShlWPgABLF8JYAAAAAAAAAAAAAHGZGAADTiaAAAAAAAAAAAAAAAAAAAAAAAAAAABxGSAAA08mQAAAAAAADhIE4T6dhMkoAAAAAAAAAAAAAADjMjAABpxNAAAAAAAAAAAAAAAAAAAAAAAAAAAA4zIwAAacTQAAAAAAAAAAAAAAAAAAAAAAAAABxGSAAA08mQAAAAAAAAAAAAAAAAAAAAAAAAAAAc5j4AANILAAAAAAAAAAAAAAAAAAAAAAAAAAARhlQAANTJUAAAAAAAAAAAAAAAAAAAAAAAAAAAHwxo/IABei3AAAAAAAAAAAAAAAAAAAAAAAAAAFeM4AABrp1gAAAAAAAAAAAAAAAAAAAAAAAAAAAGTkeAAWI0YAAAAAAAAAAAAAAAAAAAAAAAAAAopUQAD0NjPoAAAAAAAAAAAAAAAAAAAAAAAAAAABnhWgAD0NdPcAAAAAAAAAAAAAAAAAAAAAAAAA/JkhyAAEyaeAAAAAAAAAAAAAAAAAAAAAAAAAAAACsGfAAAt5eQAAAAAAAAAAAAAAAAAAAAAAAACoFGAABdi5AAAAAAAAAAAAAAAAAAAAAAAAAAAAA8TITzAAPpopYgAAAAAAAAAAAAAAAAAAAAAAACDM2PwAADWTvAAAAAAAAAAAAAAAAAAAAAAAAAAAAAKCVUAAH0uZcD0AAAAAAAAAAAAAAAAAAAAAAPwVIpR+AAAT5pIAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOMyc8wAADoLGTJ3nufQAAAAAAAAAAAAAAAAAD4eJwkMVw5QAAD6aoSYAAAAAAAAAAAAAAAAAAAAAAAAAAAAABUiiAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFxLuAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAZ4VoAAAAAAAAAAAAAAAAAAAAAAAAAAAAAnTST9AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAH5M9K2AAAAAAAAAAAAAAAAAAAAAAAAAAAATpo56AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAHwp5Sz8AAAAAAAAAAAAAAAAAAAAAAAAAAH0uBdT9AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAjylFdPgAAAAAAAAAAAAAAAAAAAAAAAB9J4uxJgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA4yuEERJ4gAAAAAAAAAAAAAAAAAAAAHqSpOFkO4AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAHKcp5HwAAAAAAAAAAAAAAAAAA+nodR1H0AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAH/2gAIAQIAAQUA/wB6E//aAAgBAwABBQD/AHoT/9oACAEBAAEFAP8ALq+voKlSagTcW+QuTcLk3C5NwuTc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lgXJQ4VDGW8vBw36DrlLUmk9pzdVwJzwhllAbbbFCEDc/IRBFIOAgwqY/wAcAlWNcriB7h3MkKbcQW1pNCkKFBB4RfYJSkqUo0JSBSSeCEv/AORHVTjTK7p7x3MkJQhIQhIoSkCgADcA/ItEw32wKEPJwLHHnhS5f+7aH0ihYyp3eKClQKVDAUnARfIACknEBCVup/6jJ+ZwdojgTj5aIpZb6ztHafXhUcm9xfkmiZl0OnEF0UKGRQoMFUpMqbO424OsOUUGCQwH0j5mlA8xoPNFDzDjPfSU9IvZQyyt07yElXRA/tvspPzOkJ5sfNAVOTRVvttCgfvHNH9vLpQr/kPaV+8aT+TsMfzJRlZO6ptJPRGGSbGSlPQRFjH77niix+o54osfqOeKLH6jniix+o54osfqOeKLH6jniix+o54osfqOeKLH6jniix+o54osfqOeKLH6jniix+o54osfqOeKLH6jniix+o54osfqOeKLH6jniix+o54osfqOeKLH6jniix+o54osfqOeKLH6jniix+o54osfqOeKLH6jniix+o54osfqOeKLH6jniix+o54osfqOeKLH6jniix+o54osfqOeKLH6jniix+o54osf8bnijBJIOWk9JMUtybKCN0NpB5aIoAoAxAf6ur//2Q==",O={name:"Apple Music",props:{appName:String,appBuild:String,hasToken:Boolean,storefront:String,songsLimit:{type:Number,default:15}},data(){return{busy:!1,msg:this.hasToken?"Token saved.":"Not connected yet.",items:[],loading:!1,error:null,limit:this.songsLimit,offset:0,language:"en-US",storefrontInfo:null,searchQuery:"",searchType:"songs",searchResults:[],searching:!1,searchError:null,searchLimit:10,_searchTimer:null,fallbackArtwork:j}},created(){this.hasToken&&(this.fetchStorefront(),this.fetchRecent())},watch:{hasToken(e){e?(this.fetchStorefront(),this.fetchRecent()):(this.items=[],this.error=null,this.loading=!1,this.storefrontInfo=null,this.searchQuery="",this.searchResults=[],this.searching=!1,this.searchError=null)}},computed:{headerTitle(){return this.hasToken?"Apple Music":"Authorize Apple Music"},searchResultItems(){var s;const e=(((s=this.storefrontInfo)==null?void 0:s.id)||this.storefront||"us").toString().toLowerCase(),A=e==="auto"?"us":e,t=this.$urls&&this.$urls.panel?this.$urls.panel:"/panel";return(this.searchResults||[]).map(o=>{const{id:i,kind:a,image:r,text:n,info:W,link:h}=o||{},d=a==="albums"||a==="album",m=d?"album":"song",f=i?`https://music.apple.com/${A}/${m}/${encodeURIComponent(i)}`:null,Y=r||this.fallbackArtwork,u={id:i,text:n,info:W,icon:d?"album":"music",...r?{image:{src:Y,ratio:"1/1",cover:!0,back:"pattern"}}:{}};if(h?u.link=h:i&&(u.link=`${t}/applemusic/${m}/${encodeURIComponent(i)}`),f){const g=p({url:f,onCopy:(l,X="Link copied to clipboard")=>this.copyToClipboard(l,X),onEmbed:l=>this.buildEmbedCode(l),onError:l=>this.notify("error",l)});g.length&&(u.options=g)}return u})},searchTypeOptions(){return[{value:"songs",text:"Songs"},{value:"albums",text:"Albums"}]},collectionItems(){return(this.items||[]).map(e=>{const A=this.trackUrl(e),t=typeof e.id=="string"&&e.id.startsWith("i."),s={id:e.id,text:this.trackTitle(e),info:this.artistName(e),image:{src:this.artworkUrl(e,300)||this.fallbackArtwork,ratio:"1/1",cover:!0,back:"pattern"},icon:"music",title:this.trackSubtitle(e),...t?{}:{link:"applemusic/song/"+e.id}};if(A){const o=p({url:A,onCopy:(i,a="Link copied to clipboard")=>this.copyToClipboard(i,a),onEmbed:i=>this.buildEmbedCode(i),onError:i=>this.notify("error",i)});o.length&&(s.options=o)}return s})},statReports(){const e=[{label:"Version "+this.appBuild,value:this.appName,icon:"layers",info:"Build Info",theme:"info"}];return this.storefrontInfo&&e.push({label:"Storefront",value:this.storefrontInfo.id,icon:"store",info:this.storefrontInfo.language,theme:this.storefrontInfo.id?"positive":"warning"}),e}},mounted(){(async()=>{try{await this.loadMusicKit(this.cspNonce);const e=await fetch("/applemusic/dev-token",{credentials:"same-origin"});if(!e.ok)throw new Error("dev-token "+e.status);const{token:A}=await e.json(),t=(this.storefront||"auto").toLowerCase(),s={developerToken:A,app:{name:this.appName||"KirbyMusicKit",build:this.appBuild||"2.0.0"}};t!=="auto"&&(s.storefrontId=t),window.MusicKit.configure(s)}catch{this.notify("error","Failed to prepare Apple Music (CSP/network/dev token)")}})(),(async()=>{try{const e=await fetch("/applemusic/has-token",{credentials:"same-origin"});if(e.ok){const{hasToken:A}=await e.json();this.hasToken=!!A}}catch(e){console.warn("has-token check failed:",e)}})();try{const e=new URL(window.location.href);e.searchParams.get("connected")==="1"&&(this.notify("success","Connected â€” token saved."),e.searchParams.delete("connected"),window.history.replaceState({},"",e.toString()))}catch{}},methods:{onSearchInput(e){if(this.searchQuery=e||"",clearTimeout(this._searchTimer),!this.searchQuery.trim()){this.searchResults=[],this.searchError=null;return}this._searchTimer=setTimeout(()=>this.performSearch(this.searchQuery),400)},async performSearch(e){var t;const A=(typeof e=="string"?e:this.searchQuery).trim();if(A)try{this.searching=!0,this.searchError=null;const s=(((t=this.storefrontInfo)==null?void 0:t.id)||this.storefront||"us").toString().toLowerCase(),o=s==="auto"?"us":s,a=`/applemusic/search?${new URLSearchParams({q:A,limit:String(this.searchLimit),language:this.language,sf:o,type:this.searchType}).toString()}`,r=await fetch(a,{credentials:"same-origin"}),n=await r.json();if(!r.ok||!n.ok)throw new Error((n==null?void 0:n.error)||`HTTP ${r.status}`);this.searchResults=n.results}catch(s){this.searchResults=[],this.searchError=(s==null?void 0:s.message)||"Search failed",this.notify("error",this.searchError)}finally{this.searching=!1}},onSearchTypeChange(e){var A;this.searchType=e||"songs",(A=this.searchQuery)!=null&&A.trim()&&this.performSearch()},async copyToClipboard(e,A="Copied"){var t;try{if(!e)throw new Error("Nothing to copy");if((t=navigator.clipboard)!=null&&t.writeText)await navigator.clipboard.writeText(e);else{const s=document.createElement("textarea");s.value=e,s.setAttribute("readonly",""),s.style.position="fixed",s.style.opacity="0",document.body.appendChild(s),s.select(),document.execCommand("copy"),document.body.removeChild(s)}this.notify("success",A)}catch(s){console.warn("copyToClipboard failed:",s),this.notify("error","Could not copy to clipboard")}},toEmbedUrl(e){var A;try{const t=new URL(e);if(!/apple\.com$/i.test(t.hostname))return null;t.hostname="embed.music.apple.com";const s=t.pathname.split("/").filter(Boolean);if(!(s.length>0&&/^[a-z]{2}$/i.test(s[0]))){const i=(((A=this.storefrontInfo)==null?void 0:A.id)||this.storefront||"us").toString().toLowerCase();s.unshift(i),t.pathname="/"+s.join("/")}return t.toString()}catch{return null}},buildEmbedCode(e){const A=this.toEmbedUrl(e);return A?`<iframe allow="autoplay *; encrypted-media *;" frameborder="0" height="150" style="width:100%;overflow:hidden;background:transparent;" sandbox="allow-forms allow-popups allow-same-origin allow-scripts allow-storage-access-by-user-activation allow-top-navigation-by-user-activation" src="${A}"></iframe>`:null},async loadMusicKit(e){var A,t;(A=window.MusicKit)!=null&&A.getInstance||(document.querySelector("script[data-am-mk]")?(t=window.MusicKit)!=null&&t.getInstance||await new Promise(s=>{window.addEventListener("musickitloaded",s,{once:!0}),setTimeout(s,50)}):await new Promise((s,o)=>{const i=document.createElement("script");i.src="https://js-cdn.music.apple.com/musickit/v3/musickit.js",i.async=!0,i.dataset.amMk="1",e&&i.setAttribute("nonce",e),i.onerror=o,document.head.appendChild(i);let a=!1,r=!1;const n=()=>{a&&r&&s()};i.onload=()=>{a=!0,n()},window.addEventListener("musickitloaded",()=>{r=!0,n()},{once:!0})}))},async redirectAuth(){try{this.busy=!0,this.notify("info","Redirecting to Apple Music sign-inâ€¦");const e=(this.storefront||"auto").toLowerCase(),A=window.location.href,t=`/applemusic/auth?sf=${encodeURIComponent(e)}&returnTo=${encodeURIComponent(A)}`;window.location.assign(t)}catch{this.notify("error","Could not start sign-in")}},async popupAuth(){try{this.busy=!0,this.notify("info","Opening Apple Musicâ€¦");const e=(this.storefront||"").toLowerCase(),A=e?`/applemusic/auth?sf=${encodeURIComponent(e)}`:"/musickit/auth",t=window.open(A,"amPopup","width=480,height=600"),s=async o=>{if(o.origin!==window.location.origin)return;const i=o.data||{};if(i.type==="musickit-token"){window.removeEventListener("message",s),i.ok?(this.notify("success","Connected â€” token saved"),this.hasToken=!0):(console.error("Popup failed:",i.error,i.detail||""),this.notify("warning","Authorization cancelled or failed"));try{t&&t.close()}catch{}this.busy=!1}};window.addEventListener("message",s),setTimeout(()=>{try{(!t||t.closed)&&(window.removeEventListener("message",s),this.busy=!1,this.notify("info","Popup closed"))}catch{}},6e4)}catch(e){console.error("popupAuth error:",e),this.notify("error","Could not open popup"),this.busy=!1}},async refreshDevToken(){var e,A;try{const t=await fetch("/applemusic/dev-token/refresh",{method:"POST",credentials:"same-origin",headers:{Accept:"application/json"}});if(!t.ok){const a=await t.text();throw new Error(`HTTP ${t.status}: ${a.slice(0,200)}`)}const{token:s}=await t.json();if(!s)throw new Error("No token returned");const o=(this.storefront||"auto").toLowerCase(),i={developerToken:s,app:{name:this.appName||"KirbyMusicKit",build:this.appBuild||"dev"}};if(o&&o!=="auto"&&(i.storefrontId=o),!window.MusicKit)throw new Error("MusicKit SDK not loaded");window.MusicKit.configure(i);try{window.MusicKit.getInstance()}catch{}this.notify("success","Developer token refreshed"),this.hasToken&&((e=this.fetchStorefront)==null||e.call(this),(A=this.fetchRecent)==null||A.call(this))}catch(t){console.error("refreshDevToken failed:",t),this.notify("error",`Could not refresh dev token: ${t.message||t}`)}},async disconnect(){var e,A;try{if(!confirm("Disconnect Apple Music for this Panel user?"))return;this.busy=!0,this.notify("info","Disconnecting...");try{await this.loadMusicKit(this.cspNonce);const s=(A=(e=window.MusicKit)==null?void 0:e.getInstance)==null?void 0:A.call(e);s!=null&&s.isAuthorized&&await s.unauthorize()}catch(s){console.warn("unauthorize() skipped/failed:",s)}const t=await fetch("/applemusic/delete-user-token",{method:"POST",credentials:"same-origin"});if(!t.ok)throw new Error("delete-token "+t.status);this.hasToken=!1,this.notify("success","Disconnected â€” saved token removed")}catch(t){console.error("disconnect() error:",t),this.notify("error","Could not disconnect â€” see console for details")}finally{this.busy=!1}},async fetchStorefront(){var e,A;try{const t=new URLSearchParams({language:this.language}).toString(),s=await fetch(`/applemusic/storefront?${t}`,{credentials:"same-origin"});if(!s.ok)throw new Error("storefront "+s.status);const o=await s.json(),i=((e=o==null?void 0:o.data)==null?void 0:e[0])||{};this.storefrontInfo={id:i.id||null,language:((A=i.attributes)==null?void 0:A.defaultLanguageTag)||null}}catch{this.storefrontInfo=null,this.notify("info","Could not load storefront")}},async fetchRecent(e={}){this.loading=!0,this.error=null;const A={limit:e.limit??this.limit,offset:e.offset??this.offset,language:this.language};try{const t=new URLSearchParams({limit:String(A.limit),offset:String(A.offset),language:A.language}).toString(),o=await(await fetch(`/applemusic/recent?${t}`,{credentials:"same-origin"})).json();this.items=Array.isArray(o==null?void 0:o.data)?o.data:[],this.limit=A.limit,this.offset=A.offset}catch(t){this.error=(t==null?void 0:t.message)||"Failed to load recently played tracks"}finally{this.loading=!1}},nextPage(){this.fetchRecent({offset:this.offset+this.limit})},prevPage(){this.fetchRecent({offset:Math.max(0,this.offset-this.limit)})},artworkUrl(e,A=100){var s;const t=(s=e==null?void 0:e.attributes)==null?void 0:s.artwork;return t!=null&&t.url?t.url.replace("{w}",A).replace("{h}",A):null},trackTitle(e){var A;return((A=e==null?void 0:e.attributes)==null?void 0:A.name)||"Untitled"},trackSubtitle(e){var s,o;const A=(s=e==null?void 0:e.attributes)==null?void 0:s.artistName,t=(o=e==null?void 0:e.attributes)==null?void 0:o.albumName;return[A,t].filter(Boolean).join(" â€” ")},artistName(e){var A;return(A=e==null?void 0:e.attributes)==null?void 0:A.artistName},albumName(e){var A;return((A=e==null?void 0:e.attributes)==null?void 0:A.albumName)||"Untitled"},trackUrl(e){var A;return((A=e==null?void 0:e.attributes)==null?void 0:A.url)||null},notify(e,A){var s;const t=this.$panel||((s=this.$root)==null?void 0:s.$panel);if(t!=null&&t.notification){if(typeof t.notification[e]=="function"){t.notification[e](A);return}if(typeof t.notification.create=="function"){t.notification.create({message:A,type:e});return}}console[e==="error"?"error":"log"](`[${e}] ${A}`)}}};var P=function(){var A=this,t=A._self._c;return t("k-panel-inside",[t("k-view",{staticClass:"k-musickit-auth"},[t("k-header",{staticClass:"k-site-view-header"},[A._v(" "+A._s(A.headerTitle)+" "),t("k-button-group",{attrs:{slot:"buttons"},slot:"buttons"},[t("k-button",{attrs:{variant:"filled",theme:"blue-icon",icon:"document",size:"xs",link:"https://github.com/scottboms/kirby-applemusic/blob/main/README.md",target:"_blank",responsive:"true",text:"Setup Guide"}}),A.hasToken?A._e():t("k-button",{attrs:{disabled:A.busy,variant:"filled",theme:"green-icon",icon:"open",size:"xs"},on:{click:A.redirectAuth}},[A._v(" "+A._s(A.hasToken?"Re-authorize Apple Music":"Authorize Apple Music")+" ")]),A.hasToken?t("k-button",{attrs:{disabled:A.busy,variant:"filled",icon:"reset-token",text:"Reset Token",size:"xs",title:"Reset the Cached Token"},on:{click:A.refreshDevToken}}):A._e(),A.hasToken?t("k-button",{attrs:{disabled:A.busy,variant:"filled",theme:"red-icon",icon:"logout",text:"Disconnect",size:"xs",title:"Delete the Saved Token"},on:{click:A.disconnect}}):A._e()],1)],1),A.hasToken?A._e():t("k-box",{staticStyle:{"margin-bottom":".5rem"},attrs:{theme:"positive",icon:"settings"}},[A._v(" Your configuration is ready to connect to your Apple Music account. ")]),t("k-section",[t("k-stats",{staticClass:"k-musickit-info-reports",attrs:{reports:A.statReports,size:"small"}})],1),A.hasToken?[t("k-section",[t("k-box",{staticStyle:{"margin-bottom":"var(--spacing-1)"},attrs:{icon:"search",theme:"white"}},[t("k-select-field",{staticStyle:{"min-width":"9rem"},attrs:{value:A.searchType,options:A.searchTypeOptions,disabled:!A.hasToken,icon:"angle-down",size:"tiny"},on:{input:A.onSearchTypeChange}}),t("k-search-input",{staticStyle:{"min-width":"80%"},attrs:{value:A.searchQuery,disabled:!A.hasToken,autofocus:!0,placeholder:"Search Apple Music..."},on:{input:A.onSearchInput,submit:A.performSearch}})],1),A.searching?t("k-box",{staticStyle:{"--width":"100%"},attrs:{icon:"loader"}},[A._v("Searching...")]):A.searchResults.length?t("k-items",{attrs:{items:A.searchResultItems,layout:"list",size:"small"}}):A.searchQuery&&!A.searching?t("k-box",{attrs:{theme:"none"}},[A._v("No matches found")]):A._e()],1),t("k-section",{attrs:{label:"Recently Played Tracks"}},[t("k-button",{attrs:{slot:"options",size:"xs",variant:"filled",icon:"refresh"},on:{click:function(s){return A.fetchRecent()}},slot:"options"}),A.error?t("k-box",{attrs:{theme:"negative"}},[A._v(A._s(A.error))]):A.loading?t("k-box",{attrs:{icon:"loader"}},[A._v("Loading...")]):t("div",[t("k-collection",{attrs:{items:A.collectionItems,layout:"cards",size:"large"}}),A.items.length===0?t("div",[A._v(" No items returned. ")]):A._e()],1),t("k-box",{staticStyle:{"margin-top":"1rem"},attrs:{theme:"none"}},[t("k-button-group",{attrs:{responsive:"true",theme:"gray-icon"}},[t("k-button",{attrs:{variant:"filled",size:"xs",title:"Previous Page",icon:"angle-left",disabled:A.offset<=0},on:{click:A.prevPage}}),t("k-button",{attrs:{variant:"filled",size:"xs",title:"Next Page",icon:"angle-right",disabled:A.items.length<A.limit},on:{click:A.nextPage}})],1)],1)],1)]:A._e()],2)],1)},z=[],B=c(O,P,z);const _=B.exports,H={name:"Apple Music - Song Details",props:{songId:String,language:String},data(){return{loading:!0,err:null,song:null}},async created(){try{const e=`/applemusic/song/${encodeURIComponent(this.songId)}?l=${encodeURIComponent(this.language||"en-US")}`,A=await fetch(e,{credentials:"same-origin",headers:{Accept:"application/json"}});if(!A.ok)throw new Error(`HTTP ${A.status}`);const t=await A.json();this.song=t}catch(e){this.err=(e==null?void 0:e.message)||"Failed to load song"}finally{this.loading=!1}},methods:{back(){this.$go("applemusic")}}};var U=function(){var s,o;var A=this,t=A._self._c;return t("k-panel-inside",[t("k-view",[t("k-header",{staticClass:"k-site-view-header",scopedSlots:A._u([{key:"buttons",fn:function(){var i;return[(i=A.song)!=null&&i.url?t("k-button",{attrs:{icon:"headphones",link:A.song.url,target:"_blank",theme:"blue-icon",variant:"filled"}},[A._v("Listen in Apple Music")]):A._e()]},proxy:!0}])},[A._v(" "+A._s(((s=A.song)==null?void 0:s.name)||"Song")+" ")]),A.loading?t("k-box",{attrs:{icon:"loader"}},[A._v("Loading...")]):A.err?t("k-box",{attrs:{theme:"negative",icon:"alert"}},[A._v(A._s(A.err))]):t("k-section",[t("k-grid",{staticStyle:{gap:"0","--columns":"12",background:"var(--item-color-back)","border-radius":"var(--rounded)","box-shadow":"var(--shadow)"}},[A.song.image?t("k-image-frame",{staticStyle:{"border-radius":"var(--rounded)","--width":"1/2"},attrs:{src:A.song.image,alt:A.song.name,ratio:"1/1",back:"pattern",cover:"true",icon:"music"}}):A._e(),t("k-box",{staticStyle:{"--width":"1/2"}},[t("div",{staticClass:"k-text",staticStyle:{padding:"var(--spacing-8)"}},[A.song.artistName?t("p",{staticClass:"am-artist"},[A._v(A._s(A.song.artistName))]):A._e(),A.song.albumName?t("p",{staticClass:"am-album"},[A._v(A._s(A.song.albumName)+" ("+A._s(A.song.releaseYear)+")")]):A._e(),A.song.duration?t("k-box",{staticClass:"am-duration",attrs:{icon:"clock"}},[A._v(A._s(A.song.duration))]):A._e(),A.song.previewUrl?t("k-box",[t("audio",{staticClass:"k-file-preview am-preview",attrs:{src:A.song.previewUrl,controls:""}})]):A._e(),t("hr"),A.song.composerName?t("k-box",{staticClass:"am-meta",attrs:{icon:"composer"}},[A._v("Written by "+A._s(A.song.composerName))]):A._e(),(o=A.song.genreNames)!=null&&o.length?t("k-box",{staticClass:"am-meta",attrs:{icon:"tag"}},[A._v(A._s(A.song.genreNames.join(", ")))]):A._e(),A.song.releaseDate?t("k-box",{staticClass:"am-meta",attrs:{icon:"calendar"}},[A._v(A._s(A.song.releaseDate))]):A._e()],1)])],1)],1)],1)],1)},Q=[],R=c(H,U,Q);const G=R.exports,Z={name:"Apple Music - Album Details",props:{albumId:String,language:String},data(){return{loading:!0,err:null,album:null}},async created(){try{const e=`/applemusic/album/${encodeURIComponent(this.albumId)}?l=${encodeURIComponent(this.language||"en-US")}`,A=await fetch(e,{credentials:"same-origin",headers:{Accept:"application/json"}});if(!A.ok)throw new Error(`HTTP ${A.status}`);const t=await A.json();this.album=t}catch(e){this.err=(e==null?void 0:e.message)||"Failed to load album"}finally{this.loading=!1}},computed:{albumTrackAsItems(){var A;return(((A=this.album)==null?void 0:A.tracks)||[]).map(t=>{const s={text:t.name??"",info:t.duration??"",id:t.id??`${t.number}-${t.name}`},o=t.url||null;if(o){const i=p({url:o,onCopy:(a,r="Link copied to clipboard")=>this.copyToClipboard(a,r),onEmbed:a=>this.buildEmbedCode(a),onError:a=>this.notify("error",a)});i&&i.length&&(s.options=i)}return s})},albumItemsColumns(){return{text:{label:"Track",mobile:!0},info:{label:"Duration",width:"1/8",align:"right"}}},isDigitalMaster(){var e;return(e=this.album)==null?void 0:e.isAppleDigitalMaster},isMfi(){var e;return(e=this.album)==null?void 0:e.isMasteredForItunes}},methods:{back(){this.$go("applemusic")},async copyToClipboard(e,A="Copied"){try{await navigator.clipboard.writeText(e),this.notify("success",A)}catch{this.notify("error","Could not copy to clipboard")}},buildEmbedCode(e){const A=`<iframe allow="autoplay *; encrypted-media *;" frameborder="0" height="450" style="width:100%;overflow:hidden;background:transparent;" sandbox="allow-forms allow-popups allow-same-origin allow-scripts allow-top-navigation-by-user-activation" src="${e.replace("music.apple.com","embed.music.apple.com")}"></iframe>`;return this.copyToClipboard(A,"Embed code copied"),A},notify(e,A){var s;const t=this.$panel||((s=this.$root)==null?void 0:s.$panel);if(t!=null&&t.notification){if(typeof t.notification[e]=="function"){t.notification[e](A);return}if(typeof t.notification.create=="function"){t.notification.create({message:A,type:e});return}}console[e==="error"?"error":"log"](`[${e}] ${A}`)}}};var K=function(){var s,o,i;var A=this,t=A._self._c;return t("k-panel-inside",[t("k-view",[t("k-header",{staticClass:"k-site-view-header",scopedSlots:A._u([{key:"buttons",fn:function(){var a;return[(a=A.album)!=null&&a.url?t("k-button",{attrs:{icon:"headphones",link:A.album.url,target:"_blank",theme:"blue-icon",variant:"filled"}},[A._v("Listen in Apple Music")]):A._e()]},proxy:!0}])},[A._v(" "+A._s(((s=A.album)==null?void 0:s.name)||"Album")+" ")]),A.loading?t("k-box",{attrs:{icon:"loader"}},[A._v("Loading...")]):A.err?t("k-box",{attrs:{theme:"negative",icon:"alert"}},[A._v(A._s(A.err))]):t("k-section",[t("k-grid",{staticStyle:{gap:"0","--columns":"12",background:"var(--item-color-back)","border-radius":"var(--rounded)","box-shadow":"var(--shadow)"}},[A.album.image?t("k-image-frame",{staticStyle:{"border-radius":"var(--rounded)","--width":"1/2"},attrs:{src:A.album.image,alt:A.album.name,ratio:"1/1",back:"pattern",cover:"true",icon:"music"}}):A._e(),t("k-box",{staticStyle:{"--width":"1/2"}},[t("div",{staticClass:"k-text",staticStyle:{padding:"var(--spacing-8)"}},[A.album.artistName?t("p",{staticClass:"am-artist"},[A._v(A._s(A.album.artistName))]):A._e(),A.album.name?t("p",{staticClass:"am-album"},[A._v(A._s(A.album.name))]):A._e(),t("div",{staticClass:"am-meta am-meta-details"},[A.album.genreName?t("span",[A._v(A._s(A.album.genreName))]):A._e(),A.album.releaseYear?t("span",[A._v(A._s(A.album.releaseYear))]):A._e(),A.album.isMasteredForItunes?t("k-box",{staticClass:"am-mastered",attrs:{icon:"high-res"}},[A._v("Lossless")]):A._e()],1),A.album.trackCount||A.album.totalDuration?t("p",{staticClass:"am-meta"},[A._v(A._s(A.album.trackCount)+" songs, "+A._s(A.album.totalDuration))]):A._e(),A.album.isAppleDigitalMaster?t("k-box",{staticClass:"am-meta",attrs:{icon:"apple-digital-master"}},[A._v("Apple Digital Master")]):A._e()],1)])],1),(i=(o=A.album)==null?void 0:o.tracks)!=null&&i.length?t("k-items",{staticStyle:{"border-radius":"var(--rounded)","margin-top":"var(--spacing-1)"},attrs:{layout:"table",items:A.albumTrackAsItems,columns:A.albumItemsColumns}}):A._e(),A.album.releaseDateFormatted?t("k-box",{staticClass:"am-meta am-copyright"},[A._v(A._s(A.album.releaseDateFormatted))]):A._e(),A.album.copyright?t("k-box",{staticClass:"am-meta"},[A._v(A._s(A.album.copyright))]):A._e()],1)],1)],1)},N=[],q=c(Z,K,N);const J=q.exports,F={album:'<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M17.5,5.5v9.5c0,1.38-1.12,2.5-2.5,2.5s-2.5-1.12-2.5-2.5,1.12-2.5,2.5-2.5c.17,0,.34.02.5.05v-4.65l-6,.6v7.5c0,1.38-1.12,2.5-2.5,2.5s-2.5-1.12-2.5-2.5,1.12-2.5,2.5-2.5c.17,0,.34.02.5.05v-7.05l10-1Z"/><path d="M23,20V4c0-1.66-1.34-3-3-3H4c-1.66,0-3,1.34-3,3v16c0,1.66,1.34,3,3,3h16c1.66,0,3-1.34,3-3ZM4,21c-.55,0-1-.45-1-1V4c0-.55.45-1,1-1h16c.55,0,1,.45,1,1v16c0,.55-.45,1-1,1H4Z"/></svg>',"album-filled":'<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M17.5,5.5v9.5c0,1.38-1.12,2.5-2.5,2.5s-2.5-1.12-2.5-2.5,1.12-2.5,2.5-2.5c.17,0,.34.02.5.05v-4.65l-6,.6v7.5c0,1.38-1.12,2.5-2.5,2.5s-2.5-1.12-2.5-2.5,1.12-2.5,2.5-2.5c.17,0,.34.02.5.05v-7.05l10-1ZM23,20V4c0-1.66-1.34-3-3-3H4c-1.66,0-3,1.34-3,3v16c0,1.66,1.34,3,3,3h16c1.66,0,3-1.34,3-3Z"/></svg>',"apple-digital-master":'<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20.45,20.96c.98-.47,1.55-1.55,1.55-2.97V6.27c0-1.73-.77-3.05-1.96-3.37-1.34-.36-2.85.35-4.02,1.89-.42.55-2.72,3.66-4.95,6.68-2.04,2.75-4.14,5.6-4.68,6.31v.02c-1.11,1.47-1.44,1.72-1.95,1.51-.42-.17-.63-.9-.63-2.15v-5.63c0-.47.2-.85.54-1.01.31-.15.67-.09.99.17.31.24.55.44.86.69.36.29.81.65,1.57,1.26.39.31.96.25,1.27-.14s.25-.96-.14-1.27c-.75-.6-1.2-.96-1.55-1.25-.31-.25-.56-.45-.88-.71-.88-.69-1.96-.83-2.9-.37-.96.47-1.55,1.48-1.55,2.64v5.63c0,.85,0,3.11,1.76,3.83.88.36,1.71.24,2.48-.33.57-.43,1.06-1.08,1.58-1.77v-.02c.56-.72,2.57-3.44,4.7-6.32,2.23-3.01,4.53-6.12,4.94-6.66.55-.72,1.39-1.43,2.11-1.23.2.05.62.52.62,1.62v11.72c0,.68-.19,1.18-.52,1.33-.38.18-1.03-.05-1.7-.6-.59-.48-4.7-3.87-4.74-3.9-.38-.32-.95-.26-1.27.12-.32.39-.26.95.12,1.27.04.03,4.16,3.42,4.74,3.9.86.7,1.75,1.07,2.56,1.07.37,0,.73-.08,1.06-.23h0Z" style="fill-rule:evenodd;"/></svg>',composer:'<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 2C17.5228 2 22 6.47715 22 12C22 17.5228 17.5228 22 12 22C6.47715 22 2 17.5228 2 12C2 6.47715 6.47715 2 12 2ZM12.1597 16C10.1243 16 8.29182 16.8687 7.01276 18.2556C8.38039 19.3474 10.114 20 12 20C13.9695 20 15.7727 19.2883 17.1666 18.1081C15.8956 16.8074 14.1219 16 12.1597 16ZM12 4C7.58172 4 4 7.58172 4 12C4 13.8106 4.6015 15.4807 5.61557 16.8214C7.25639 15.0841 9.58144 14 12.1597 14C14.6441 14 16.8933 15.0066 18.5218 16.6342C19.4526 15.3267 20 13.7273 20 12C20 7.58172 16.4183 4 12 4ZM12 5C14.2091 5 16 6.79086 16 9C16 11.2091 14.2091 13 12 13C9.79086 13 8 11.2091 8 9C8 6.79086 9.79086 5 12 5ZM12 7C10.8954 7 10 7.89543 10 9C10 10.1046 10.8954 11 12 11C13.1046 11 14 10.1046 14 9C14 7.89543 13.1046 7 12 7Z"></path></svg>',"edit-line":'<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M5 18.89H6.41421L15.7279 9.57627L14.3137 8.16206L5 17.4758V18.89ZM21 20.89H3V16.6473L16.435 3.21231C16.8256 2.82179 17.4587 2.82179 17.8492 3.21231L20.6777 6.04074C21.0682 6.43126 21.0682 7.06443 20.6777 7.45495L9.24264 18.89H21V20.89ZM15.7279 6.74785L17.1421 8.16206L18.5563 6.74785L17.1421 5.33363L15.7279 6.74785Z"></path></svg>',headphones:'<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M4 12H7C8.10457 12 9 12.8954 9 14V19C9 20.1046 8.10457 21 7 21H4C2.89543 21 2 20.1046 2 19V12C2 6.47715 6.47715 2 12 2C17.5228 2 22 6.47715 22 12V19C22 20.1046 21.1046 21 20 21H17C15.8954 21 15 20.1046 15 19V14C15 12.8954 15.8954 12 17 12H20C20 7.58172 16.4183 4 12 4C7.58172 4 4 7.58172 4 12Z"></path></svg>',"high-res":'<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M13,6.13c2.58,0,3.69,4.32,4.63,7.17.49-2.05.23-2.49.76-2.49.2,0,.39.13.39.38,0,.02,0,.06-.01.12l-.04.26c-.1.68-.36,2.11-.64,3.06,2.26,5.94,3.95-1.88,4.14-3.48.03-.23.2-.34.38-.34.23,0,.43.18.39.44-.41,2.58-1.03,6.61-3.59,6.61-1.42,0-2.21-1.11-2.84-2.38-1.57-3.09-2.29-8.27-3.83-8.27-.49,0-.86.51-.88.51-.05,0-.08-.21-.54-.78.44-.5,1.04-.82,1.7-.82ZM4.61,6.14c4.04,0,4.4,10.65,6.68,10.65.27,0,.56-.16.87-.53.17.3.35.56.54.79-.46.52-1.02.81-1.74.81-2.55,0-3.65-4.28-4.59-7.16-.22.93-.34,1.76-.38,2.14-.03.24-.2.35-.38.35-.2,0-.39-.13-.39-.37h0v-.06c.13-.95.4-2.39.69-3.39-.39-1.03-.88-2.15-1.61-2.15-1.46,0-2.3,3.67-2.53,5.62-.03.24-.2.35-.38.35-.2,0-.39-.13-.39-.37,0-.02,0-.04,0-.06.41-2.98,1.18-6.62,3.6-6.62ZM8.8,6.13c.72,0,1.5.38,2.17,1.26.04.04.41.63.53.83,1.64,2.97,2.43,8.58,3.99,8.58.27,0,.56-.17.88-.54.18.3.35.56.54.79-.45.52-1.02.81-1.73.81-4.01,0-4.45-10.65-6.66-10.65-.5,0-.87.52-.89.52-.05,0-.08-.21-.54-.78.45-.51,1.06-.82,1.71-.82Z"/></svg>',label:'<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12.9998 3L12.9996 10.267L19.294 6.63397L20.294 8.36602L14.0006 11.999L20.294 15.634L19.294 17.366L12.9996 13.732L12.9998 21H10.9998L10.9996 13.732L4.70557 17.366L3.70557 15.634L9.99857 12L3.70557 8.36602L4.70557 6.63397L10.9996 10.267L10.9998 3H12.9998Z"></path></svg>',music:'<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="currentColor"><path d="M20 3V17C20 19.2091 18.2091 21 16 21C13.7909 21 12 19.2091 12 17C12 14.7909 13.7909 13 16 13C16.7286 13 17.4117 13.1948 18 13.5351V6H9V17C9 19.2091 7.20914 21 5 21C2.79086 21 1 19.2091 1 17C1 14.7909 2.79086 13 5 13C5.72857 13 6.41165 13.1948 7 13.5351V3H20Z"></path></svg>',"reset-token":'<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9 12.5 6.5 15 9 17.5 11.5 15 9 12.5ZM15 2.5C11.5724 2.5 8.76444 5.15304 8.51763 8.51763 5.15304 8.76445 2.5 11.5724 2.5 15 2.5 18.5899 5.41015 21.5 9 21.5 12.4276 21.5 15.2356 18.847 15.4824 15.4824 18.847 15.2356 21.5 12.4276 21.5 9 21.5 5.41015 18.5899 2.5 15 2.5ZM15.3234 13.4886C14.7575 11.1126 12.8874 9.24245 10.5114 8.67665 10.6772 6.34229 12.6234 4.5 15 4.5 17.4853 4.5 19.5 6.51472 19.5 9 19.5 11.3766 17.6577 13.3228 15.3234 13.4886ZM13.5 15C13.5 17.4853 11.4853 19.5 9 19.5 6.51472 19.5 4.5 17.4853 4.5 15 4.5 12.5147 6.51472 10.5 9 10.5 11.4853 10.5 13.5 12.5147 13.5 15ZM3 7C3 4.79086 4.79086 3 7 3H8.5V5H7C5.89543 5 5 5.89543 5 7V8.5H3V7ZM19 17V15.5H21V17C21 19.2091 19.2091 21 17 21H15.5V19H17C18.1046 19 19 18.1046 19 17Z"></path></svg>'};panel.plugin("scottboms/kirby-applemusic",{icons:F,components:{"k-musickit-config-view":E,"k-musickit-history-view":_,"k-musickit-song-view":G,"k-musickit-album-view":J},fields:{applemusic:x},blocks:{applemusic:M}})})();
